<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="dialog.css" />
  <link rel="stylesheet" href="topMenu.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.2.0/css/all.min.css">
  <link rel="icon" href="./assets/img/favicon.png" type="image/png" />
  <title>Maqueta</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="utf-8" />
</head>

<body>

  <div class="top-menu-div">
    <a href="./homeScreen.html"><i class="fa fa-home"></i>Inicio</a>
    <a onclick="openDialog()"><i class="fa fa-layer-group" style="font-size:0.9em;"></i>Plantas</a>
  </div>

  <br /><br /><br />

  <div class="dialog-box" id="dialog" style="display: none;">
    <div class="dialog-header">
      <h2>Seleccionar planta</h2>
      <button class="close-btn" onclick="closeDialog()">&times;</button>
    </div>
    <div class="dialog-content">
      <ul>
        <li onclick="changeVideo('Azotea_cubierta'); closeDialog()">Azotea</li>
        <li onclick="changeVideo('Azotea_descubierta'); closeDialog()">Azotea sin cubiertas</li>
        <li onclick="changeVideo('Tercera_planta'); closeDialog()">Tercera planta</li>
        <li onclick="changeVideo('Segunda_planta'); closeDialog()">Segunda planta</li>
        <li onclick="changeVideo('Primera_planta'); closeDialog()">Primera planta</li>
        <li onclick="changeVideo('Planta_baja'); closeDialog()">Planta baja</li>
      </ul>
    </div>
  </div>

  <div class="video-container">
    <div class="video-loading-label" id="loading_video_label">Cargando...</div>
    <video id="modelVideo" class="video-model" playsinline muted autoplay loop controlList="nodownload" preload="auto"
      src="assets/vid/Azotea_cubierta.m4v" type="video/mp4">
      <!-- onclick="videoPlayback()" -->
    </video>
    <a onclick="openFullscreen();" class="video-fullScreen-button"><i class="fa fa-expand"></i></a>
  </div>

  <!-- Script to control video playback -->
  <script>
    var isVideoPlaying = true;

    function videoPlayback() {
      if (isVideoPlaying) {
        modelVideo.pause();
      }
      else {
        modelVideo.play();
      }
      isVideoPlaying = !isVideoPlaying;
    }

    function openFullscreen() {
      if (modelVideo.requestFullscreen) {
        modelVideo.requestFullscreen();
      } else if (modelVideo.mozRequestFullScreen) { /* Firefox */
        modelVideo.mozRequestFullScreen();
      } else if (modelVideo.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
        modelVideo.webkitRequestFullscreen();
      } else if (modelVideo.msRequestFullscreen) { /* IE/Edge */
        modelVideo.msRequestFullscreen();
      }
    }

  </script>

  <!-- Script para cambiar el vídeo -->
  <script>
    function changeVideo(videoName) {
      document.getElementById("loading_video_label").style.display = "flex";
      var video = document.getElementById("modelVideo");
      var time = video.currentTime;
      video.setAttribute("src", "assets/vid/" + videoName + ".m4v");
      //video.currentTime = time;
    }
  </script>

<!--Evento de carga del vídeo-->
<script>
  var miVideo = document.getElementById('modelVideo');
  var loadingLabel = document.getElementById('loading_video_label');
    
  miVideo.addEventListener('loadeddata', function() {
    document.getElementById("loading_video_label").style.display = "none";
  });
</script>

  <!-- Script to control the dialog -->
  <script>
    function openDialog() {
      document.getElementById("dialog").style.display = "flex";
    }

    function closeDialog() {
      document.getElementById("dialog").style.display = "none";
    }
  </script>
</body>

</html>